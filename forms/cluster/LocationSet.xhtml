<?xml version="1.0" encoding="UTF-8"?><html xmlns:ev="http://www.w3.org/2001/xml-events"
      xmlns:bf="http://betterform.sourceforge.net/xforms"
      xmlns:vra="http://www.vraweb.org/vracore4.htm"
      xmlns:bfc="http://betterform.sourceforge.net/xforms/controls"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      bf:transform="/apps/ziziphus/resources/xsl/ziziphus.xsl">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <link href="resources/css/edit-form.css" rel="stylesheet" type="text/css" />
      <title>Ziziphus_Image_DB</title>
   </head>
   <body>
      <div id="xforms">
         <!-- ###################### MODEL ##########################'-',######## -->
         <!-- ###################### MODEL ################################## -->
         <!-- ###################### MODEL ################################## -->
         <!-- ####################################### VISIBLE UI ####################################### -->
         <!-- ####################################### VISIBLE UI ####################################### -->
         <!-- ####################################### VISIBLE UI ####################################### -->
         <div style="display:none">
            <xf:model id="m-child-model" schema="resources/xsd/generator/vra-types.xsd">
               <xf:action ev:event="xforms-model-construct-done">
                  <xf:send submission="s-loadSet"></xf:send><script>
                                        clearAndInitAutocompletes();
                                    </script></xf:action>
               <xf:action ev:observer="i-locationSet" ev:event="xforms-insert"><script>
                                        initAutocompletes();
                                    </script></xf:action>
               <xf:submission id="s-loadSet"
                              resource="modules/loadData.xql?id={bf:instanceOfModel('m-main','i-control-center')/uuid}"
                              method="post"
                              replace="instance"
                              validate="false">
                  <xf:message ev:event="xforms-submit-done" level="ephemeral">Data have been loaded.</xf:message>
                  <xf:message ev:event="xforms-submit-error">Failed to load data.</xf:message>
               </xf:submission>
               <xf:submission id="s-update"
                              resource="modules/updateRecord.xql?id={bf:instanceOfModel('m-main','i-control-center')/uuid}&amp;set=locationSet&amp;workdir={encode-for-uri(bf:instanceOfModel('m-main','i-control-center')/workdir)}"
                              method="post"
                              replace="none"
                              validate="false">
                  <xf:action ev:event="xforms-submit"
                             if="exists(vra:location/*) and not(count(vra:location[@pref = ('true', '1')]) &lt;= 1)">
                     <xf:message>Warning: At most one preferred location can be selected.</xf:message>
                  </xf:action>
                  <xf:message ev:event="xforms-submit-error">Sorry, updating of this record failed</xf:message>
                  <xf:action ev:event="xforms-submit" if="exists(vra:location/*)">
                     <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@dataDate"
                                context="instance('i-locationSet')/vra:location[index('r-vraLocation')]"
                                if="not(exists(instance('i-locationSet')/vra:location[index('r-vraLocation')]/@dataDate))"></xf:insert>
                     <xf:setvalue value="now()"
                                  ref="instance('i-locationSet')/vra:location[index('r-vraLocation')]/@dataDate"></xf:setvalue>
                     <xf:recalculate></xf:recalculate>
                     <xf:setvalue value="concat(substring(.,1,10),'-',substring(.,12,2), '-', substring(.,15,2), '-', substring(.,18,2))"
                                  ref="instance('i-locationSet')/vra:location[index('r-vraLocation')]/@dataDate"></xf:setvalue>
                  </xf:action>
                  <xf:action ev:event="xforms-submit-done">
                     <xf:message level="ephemeral">Data have been stored.</xf:message>
                     <xf:setvalue ref="bf:instanceOfModel('m-main','i-control-center')/changed" value="'true'"></xf:setvalue>
                     <xf:setvalue ref="bf:instanceOfModel('m-main','i-control-center')/isDirty" value="'false'"></xf:setvalue>
                     <xf:setvalue ref="bf:instanceOfModel('m-main','i-control-center')/setname"
                                  value="'locationSet'"></xf:setvalue>
                  </xf:action>
               </xf:submission>
               <xf:instance id="i-locationSet">
                  <locationSet xmlns="http://www.vraweb.org/vracore4.htm">
                     <display></display>
                     <notes></notes>
                     <location pref="false" type="">
                        <refid type=""></refid>
                        <name type=""></name>
                        <point epsg="">
                           <lat></lat>
                           <long></long>
                        </point>
                     </location>
                  </locationSet>
               </xf:instance>
               <xf:bind nodeset="instance()">
                  <xf:bind nodeset="vra:location">
                     <xf:bind nodeset="@pref" type="boolean"></xf:bind>
                     <xf:bind nodeset="vra:name">
                        <xf:bind nodeset="@type" type="vra:locationNameTypeType"></xf:bind>
                     </xf:bind>
                     <xf:bind nodeset="@type" type="vra:locationTypeType"></xf:bind>
                     <xf:bind nodeset="vra:refid">
                        <xf:bind nodeset="@type" type="vra:locationRefidTypeType"></xf:bind>
                     </xf:bind>
                     <xf:bind nodeset="vra:point">
                        <xf:bind nodeset="@epsg"></xf:bind>
                        <xf:bind nodeset="vra:lat"></xf:bind>
                        <xf:bind nodeset="vra:long"></xf:bind>
                     </xf:bind>
                  </xf:bind>
               </xf:bind>
               <xf:bind nodeset="instance()"
                        constraint="count(vra:location[@pref = ('true', '1')]) &lt;= 1"></xf:bind>
               <xf:instance id="i-templates">
                  <templates xmlns="http://www.vraweb.org/vracore4.htm">
                     <location pref="false" type="">
                        <refid type=""></refid>
                        <name type=""></name>
                        <point epsg="">
                           <lat></lat>
                           <long></long>
                        </point>
                     </location>
                     <notes></notes>
                     <display></display>
                  </templates>
               </xf:instance>
               <xi:include href="../bricks/vraAttributesInstance.xml"></xi:include>
               <xf:instance id="i-util">
                  <data xmlns="">
                     <!--used to store the current element being used in attribute editing-->
                     <!--used to store the current element position being used in attribute editing-->
                     <currentElement></currentElement>
                     <currentPosition></currentPosition>
                  </data>
               </xf:instance>
            </xf:model>
         </div>
         <div class="toolbar">
            <xf:trigger class="t-plus -toolbarbutton" model="m-child-model" id="d3e1-add"
                        title="Add Location">
               <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/addEntry/label"></xf:label>
               <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/addEntry/hint"></xf:hint>
               <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/addEntry/help"></xf:help>
               <xf:insert model="m-child-model" nodeset="instance()/vra:location[1]"
                          origin="instance('i-templates')/vra:location"
                          position="before"></xf:insert>
            </xf:trigger>
            <xf:trigger id="d3e1-save" class="t-save -toolbarbutton">
               <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/save/label"></xf:label>
               <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/save/hint"></xf:hint>
               <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/save/help"></xf:help>
               <xf:send submission="s-update"></xf:send>
            </xf:trigger>
            <xf:trigger id="t-close" class="-toolbarbutton">
               <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/closeEditor/label"></xf:label>
               <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/closeEditor/hint"></xf:hint>
               <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/closeEditor/help"></xf:help>
               <xf:action if="bf:instanceOfModel('m-main','i-control-center')/isDirty='true'"><script type="text/javascript">
                                    closeForm();
                                </script></xf:action>
               <xf:action if="bf:instanceOfModel('m-main','i-control-center')/isDirty='false'">
                  <xf:dispatch name="unload-subform" targetid="controlCenter"></xf:dispatch>
               </xf:action>
            </xf:trigger>
            <xf:trigger id="close" class="hiddenControl">
               <xf:label>close form</xf:label>
               <xf:dispatch name="unload-subform" targetid="controlCenter"></xf:dispatch>
            </xf:trigger>
         </div>
         <xf:group id="outerGroup" appearance="minimal" model="m-child-model"
                   ref="instance('i-locationSet')">
            <!-- ############################## NOTES ####################################### -->
            <!-- ############################## NOTES ####################################### -->
            <!-- ############################## NOTES ####################################### -->
            <xf:label></xf:label>
            <xf:action ev:event="xforms-value-changed" ev:phase="capture">
               <xf:setvalue ref="bf:instanceOfModel('m-main','i-control-center')/isDirty" value="'true'"></xf:setvalue>
            </xf:action>
            <xf:action ev:event="init-dialog">
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@dataDate"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@extent"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@href"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@refid"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@rules"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@source"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@vocab"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@lang"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@transliteration"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@script"></xf:setvalue>
               <xf:insert context="instance('i-vraAttributes')/vra:vraElement[1]"
                          if="'.'=instance('i-util')/currentElement"
                          origin="instance('i-locationSet')/vra:location[index('r-vraLocation')]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:insert>
               <xf:insert context="instance('i-vraAttributes')/vra:vraElement[1]"
                          if="not('.'=instance('i-util')/currentElement) and instance('i-util')/currentPosition = -1"
                          origin="instance('i-locationSet')/vra:location[index('r-vraLocation')]/*[local-name()=instance('i-util')/currentElement]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:insert>
               <xf:insert context="instance('i-vraAttributes')/vra:vraElement[1]"
                          if="not('.'=instance('i-util')/currentElement) and instance('i-util')/currentPosition != -1"
                          origin="instance('i-locationSet')/vra:location[index('r-vraLocation')]//*[local-name()=instance('i-util')/currentElement][position() = instance('i-util')/currentPosition]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:insert>
            </xf:action>
            <xf:trigger id="doDelete" class="hiddenControl">
               <xf:label>remove</xf:label>
               <xf:action>
                  <xf:setvalue ref="bf:instanceOfModel('m-main','i-control-center')/isDirty" value="'true'"></xf:setvalue>
                  <xf:delete nodeset="instance('i-locationSet')/vra:location[index('r-vraLocation')]"></xf:delete>
               </xf:action>
               <xf:dispatch targetid="doRefresh" name="DOMActivate"></xf:dispatch>
            </xf:trigger>
            <xf:trigger id="doRefresh" class="hiddenControl">
               <xf:label>refresh</xf:label>
               <xf:action><script>
                            clearAndInitAutocompletes();
                        </script></xf:action>
            </xf:trigger>
            <table>
               <tbody model="m-child-model" id="r-vraLocation" xf:repeat-nodeset="vra:location">
                  <tr>
                     <td class="prefCol">
                        <xf:input ref="@pref" id="d3e57-pref">
                           <xf:label>
                              <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/pref/label">
                                 <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/pref/hint"></xf:hint>
                                 <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/pref/help"></xf:help>
                              </xf:output>
                           </xf:label>
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/pref/placeholder"></xf:hint>
                           <xf:action ev:event="xforms-value-changed" if=".=('true',1)"
                                      while="(../preceding-sibling::*|../following-sibling::*)/@pref=('true',1)">
                              <xf:setvalue ref="(../preceding-sibling::*|../following-sibling::*)[@pref=('true',1)][1]/@pref"
                                           value="'false'"></xf:setvalue>
                           </xf:action>
                        </xf:input>
                     </td>
                     <td class="contentCol">
                        <xf:group appearance="minimal">
                           <xf:select1 id="b-d2e861" class=" " ref="@type">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/type/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/type/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/type/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/type/placeholder"></xf:hint>
                              <xf:item>
                                 <xf:label>Creation</xf:label>
                                 <xf:value>creation</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Discovery</xf:label>
                                 <xf:value>discovery</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Exhibition</xf:label>
                                 <xf:value>exhibition</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerOwner</xf:label>
                                 <xf:value>formerOwner</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerRepository</xf:label>
                                 <xf:value>formerRepository</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerSite</xf:label>
                                 <xf:value>formerSite</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Installation</xf:label>
                                 <xf:value>installation</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Intended</xf:label>
                                 <xf:value>intended</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Owner</xf:label>
                                 <xf:value>owner</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Performance</xf:label>
                                 <xf:value>performance</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Publication</xf:label>
                                 <xf:value>publication</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Repository</xf:label>
                                 <xf:value>repository</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Site</xf:label>
                                 <xf:value>site</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                        </xf:group>
                        <xf:group appearance="minimal"><span style="display:none">
                              <xf:input id="b-d2e816" class="Name-autocomplete" ref="vra:name">
                                 <xf:action ev:event="autocomplete-callback">
                                    <xf:setvalue ref="." value="event('termValue')"></xf:setvalue>
                                    <xf:action>
                                       <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@refid" context="."
                                                  if="not(exists(instance('i-locationSet')/vra:location[index('r-vraLocation')]/@refid))"></xf:insert>
                                       <xf:setvalue ref="@refid" value="event('refid')"></xf:setvalue>
                                    </xf:action>
                                    <xf:action>
                                       <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@vocab" context="."
                                                  if="not(exists(instance('i-locationSet')/vra:location[index('r-vraLocation')]/@vocab))"></xf:insert>
                                       <xf:setvalue ref="@vocab" value="event('authority')"></xf:setvalue>
                                    </xf:action>
                                    <xf:action if="exists(../vra:dates/vra:earliestDate)">
                                       <xf:setvalue ref="../vra:dates/vra:earliestDate" value="event('earliestDate')"></xf:setvalue>
                                    </xf:action>
                                    <xf:action if="exists(../vra:dates/vra:latestDate)">
                                       <xf:setvalue ref="../vra:dates/vra:latestDate" value="event('latestDate')"></xf:setvalue>
                                    </xf:action>
                                 </xf:action>
                              </xf:input></span><span data-name="Name-autocomplete" data-collections="" data-multiple=""><span data-name="custom-selection"><span data-name="global" style="display:none"><label for="global">GLOBAL</label><input type="hidden" name="global-select" value="100" /></span><span data-name="custom" style="display:none"><label for="custom">CUSTOM</label><input type="hidden" name="custom-select" data-placeholder="No repos found." /></span></span><span data-name="autocomplete">
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/hint"></xf:hint>
                                 </xf:output><input type="hidden" data-name="Name-autocomplete" name="Name-autocomplete-input"
                                        placeholder="Type to search ..."
                                        data-queryType="geographic"
                                        autocomplete="off" /></span></span><xf:select1 id="b-d2e823" class=" nameType" ref="vra:name/@type">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/type/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/type/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/type/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/name/type/placeholder"></xf:hint>
                              <xf:item>
                                 <xf:label>Corporate</xf:label>
                                 <xf:value>corporate</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Geographic</xf:label>
                                 <xf:value>geographic</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Personal</xf:label>
                                 <xf:value>personal</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                           <xf:group class="vraAttributes" appearance="minimal" ref="vra:name">
                              <xi:include href="../bricks/vraAttributesViewUI.xml"></xi:include>
                           </xf:group>
                           <xf:trigger class="vraAttributeTrigger">
                              <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/label"></xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/hint"></xf:hint>
                              <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/help"></xf:help>
                              <xf:action>
                                 <xf:setvalue ref="instance('i-util')/currentElement" value="'name'"></xf:setvalue>
                                 <xf:setvalue ref="instance('i-util')/currentPosition">-1</xf:setvalue>
                                 <xf:dispatch name="init-dialog" targetid="outerGroup"></xf:dispatch>
                              </xf:action>
                              <bfc:show dialog="attrDialog" ev:event="DOMActivate"></bfc:show>
                           </xf:trigger>
                        </xf:group>
                        <xf:group appearance="minimal">
                           <xf:input id="b-d2e794" ref="vra:refid">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/placeholder"></xf:hint>
                           </xf:input>
                           <xf:select1 id="b-d2e801" class=" refidType" ref="vra:refid/@type">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/type/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/type/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/type/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/refid/type/placeholder"></xf:hint>
                              <xf:item>
                                 <xf:label>Accession</xf:label>
                                 <xf:value>accession</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Barcode</xf:label>
                                 <xf:value>barcode</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>ShelfList</xf:label>
                                 <xf:value>shelfList</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                           <xf:group class="vraAttributes" appearance="minimal" ref="vra:refid">
                              <xi:include href="../bricks/vraAttributesViewUI.xml"></xi:include>
                           </xf:group>
                           <xf:trigger class="vraAttributeTrigger">
                              <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/label"></xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/hint"></xf:hint>
                              <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/help"></xf:help>
                              <xf:action>
                                 <xf:setvalue ref="instance('i-util')/currentElement" value="'refid'"></xf:setvalue>
                                 <xf:setvalue ref="instance('i-util')/currentPosition">-1</xf:setvalue>
                                 <xf:dispatch name="init-dialog" targetid="outerGroup"></xf:dispatch>
                              </xf:action>
                              <bfc:show dialog="attrDialog" ev:event="DOMActivate"></bfc:show>
                           </xf:trigger>
                        </xf:group>
                        <xf:group appearance="minimal">
                           <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/label">
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/hint"></xf:hint>
                              <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/help"></xf:help>
                           </xf:output>
                           <xf:input ref="vra:point/@epsg">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/epsg/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/epsg/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/epsg/label"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/epsg/placeholder"></xf:hint>
                           </xf:input>
                           <xf:input id="b-d2e844" ref="vra:point/vra:lat">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/lat/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/lat/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/lat/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/lat/placeholder"></xf:hint>
                           </xf:input>
                           <xf:input id="b-d2e845" ref="vra:point/vra:long">
                              <xf:label>
                                 <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/long/label">
                                    <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/long/hint"></xf:hint>
                                    <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/long/help"></xf:help>
                                 </xf:output>
                              </xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/locationSet/location/point/long/placeholder"></xf:hint>
                           </xf:input>
                        </xf:group>
                     </td>
                     <td class="triggerCol">
                        <xf:trigger class="-btn -btn-trashcan">
                           <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/removeTrashcan/label"></xf:label>
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/removeTrashcan/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/removeTrashcan/help"></xf:help><script type="text/javascript">
                        removeEntry();
                    </script></xf:trigger>
                     </td>
                  </tr>
                  <tr>
                     <td colspan="3" class="globalAttrs">
                        <xf:group class="vraAttributes" appearance="minimal" ref=".">
                           <xi:include href="../bricks/vraAttributesViewUI.xml"></xi:include>
                           <xf:trigger class="vraAttributeTrigger">
                              <xf:label></xf:label>
                              <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/hint"></xf:hint>
                              <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/editAttributes/help"></xf:help>
                              <xf:action>
                                 <xf:setvalue ref="instance('i-util')/currentElement">.</xf:setvalue>
                                 <xf:setvalue ref="instance('i-util')/currentPosition">-1</xf:setvalue>
                                 <xf:dispatch name="init-dialog" targetid="outerGroup"></xf:dispatch>
                              </xf:action>
                              <bfc:show dialog="attrDialog" ev:event="DOMActivate"></bfc:show>
                           </xf:trigger>
                        </xf:group>
                     </td>
                  </tr>
               </tbody>
            </table>
            <xf:switch>
               <xf:case id="c-hidden">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/showNotes/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/showNotes/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/showNotes/help"></xf:help>
                     <xf:toggle case="c-showNotes"></xf:toggle>
                  </xf:trigger>
               </xf:case>
               <xf:case id="c-showNotes">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideNotes/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideNotes/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideNotes/help"></xf:help>
                     <xf:toggle case="c-hidden"></xf:toggle>
                  </xf:trigger>
                  <xf:textarea id="notes" ref="vra:notes" type="nodeValue" model="m-child-model">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/notes/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/notes/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/notes/help"></xf:help>
                  </xf:textarea>
               </xf:case>
            </xf:switch>
            <xf:switch>
               <xf:case id="c-hiddenDisplay">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/showDisplay/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/showDisplay/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/showDisplay/help"></xf:help>
                     <xf:toggle case="c-showDisplay"></xf:toggle>
                  </xf:trigger>
               </xf:case>
               <xf:case id="c-showDisplay">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideDisplay/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideDisplay/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/hideDisplay/help"></xf:help>
                     <xf:toggle case="c-hiddenDisplay"></xf:toggle>
                  </xf:trigger>
                  <xf:textarea id="display" ref="vra:display" type="nodeValue" model="m-child-model">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/display/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/display/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/display/help"></xf:help>
                  </xf:textarea>
               </xf:case>
            </xf:switch>
         </xf:group>
         <bfc:dialog id="attrDialog">
            <xf:label>Attributes</xf:label>
            <xf:group appearance="minimal" ref="instance('i-vraAttributes')/vra:vraElement">
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:output ref="@dataDate" id="first">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/dataDate/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/dataDate/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/dataDate/help"></xf:help>
                  </xf:output>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@dataDate"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@extent" id="d3e1-extent">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/extent/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/extent/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/extent/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/extent/placeholder"></xf:hint>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@extent"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@href" id="d3e1-href">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/href/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/href/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/href/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/href/placeholder"></xf:hint>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@href"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:output ref="@vocab" id="d3e1-vocab">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/vocab/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/vocab/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/vocab/help"></xf:help>
                  </xf:output>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:output ref="@refid" id="d3e1-refid">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/refid/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/refid/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/refid/help"></xf:help>
                  </xf:output>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@rules" id="d3e1-rules">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/rules/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/rules/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/rules/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/rules/placeholder"></xf:hint>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@rules"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@source" id="d3e1-source">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/source/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/source/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/source/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/source/placeholder"></xf:hint>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@source"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:select1 ref="@lang" id="d3e1-lang">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/lang/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/lang/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/lang/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/lang/placeholder"></xf:hint>
                     <xf:itemset nodeset="bf:instanceOfModel('m-code-tables', 'i-codes-lang')/items/item">
                        <xf:label ref="label"></xf:label>
                        <xf:value ref="value"></xf:value>
                     </xf:itemset>
                  </xf:select1>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@lang"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:select1 ref="@script" id="d3e1-script">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/script/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/script/hint"></xf:hint>
                           <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/script/help"></xf:help>
                        </xf:output>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/script/placeholder"></xf:hint>
                     <xf:itemset nodeset="bf:instanceOfModel('m-code-tables', 'i-codes-script')/items/item">
                        <xf:label ref="label"></xf:label>
                        <xf:value ref="value"></xf:value>
                     </xf:itemset>
                  </xf:select1>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@script"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:select1 ref="@transliteration" id="d3e1-transliteration">
                     <xf:label>
                        <xf:output ref="bf:instanceOfModel('m-lang','i-lang')/transliteration/label">
                           <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/transliteration/hint"></xf:hint>
                        </xf:output>
                        <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/transliteration/help"></xf:help>
                     </xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/transliteration/placeholder"></xf:hint>
                     <xf:itemset nodeset="bf:instanceOfModel('m-code-tables', 'i-codes-transliteration')/items/item">
                        <xf:label ref="label"></xf:label>
                        <xf:value ref="value"></xf:value>
                     </xf:itemset>
                  </xf:select1>
                  <xf:trigger class="deleteAttribute">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/clear/help"></xf:help>
                     <xf:setvalue ref="@transliteration"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group class="buttonBar">
                  <xf:trigger class="-btn">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/ok/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/ok/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/ok/help"></xf:help>
                     <xf:action if="'.'=instance('i-util')/currentElement">
                        <xf:delete nodeset="instance('i-locationSet')/vra:location[index('r-vraLocation')]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:delete>
                        <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@*[string-length(.) != 0]"
                                   context="instance('i-locationSet')/vra:location[index('r-vraLocation')]"></xf:insert>
                     </xf:action>
                     <xf:action if="not('.'=instance('i-util')/currentElement) and instance('i-util')/currentPosition = -1">
                        <xf:delete nodeset="instance('i-locationSet')/vra:location[index('r-vraLocation')]/*[local-name()=instance('i-util')/currentElement]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:delete>
                        <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@*[string-length(.) != 0]"
                                   context="instance('i-locationSet')/vra:location[index('r-vraLocation')]/*[local-name()=instance('i-util')/currentElement]"></xf:insert>
                     </xf:action>
                     <xf:action if="not('.'=instance('i-util')/currentElement) and instance('i-util')/currentPosition != -1">
                        <xf:delete nodeset="instance('i-locationSet')/vra:location[index('r-vraLocation')]//*[local-name()=instance('i-util')/currentElement][position() = instance('i-util')/currentPosition]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:delete>
                        <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@*[string-length(.) != 0]"
                                   context="instance('i-locationSet')/vra:location[index('r-vraLocation')]//*[local-name()=instance('i-util')/currentElement][position() = instance('i-util')/currentPosition]"></xf:insert>
                     </xf:action>
                     <bfc:hide dialog="attrDialog"></bfc:hide>
                  </xf:trigger>
                  <xf:trigger class="-btn">
                     <xf:label ref="bf:instanceOfModel('m-lang','i-lang')/actions/cancel/label"></xf:label>
                     <xf:hint ref="bf:instanceOfModel('m-lang','i-lang')/actions/cancel/hint"></xf:hint>
                     <xf:help ref="bf:instanceOfModel('m-lang','i-lang')/actions/cancel/help"></xf:help>
                     <bfc:hide dialog="attrDialog"></bfc:hide>
                  </xf:trigger>
               </xf:group>
            </xf:group>
         </bfc:dialog>
      </div>
   </body>
</html>